<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>codplayer admin</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- All the third-party goodies -->
  <script src="libs/jquery-2.0.3.min.js"></script>
  <script src="libs/underscore-min.js"></script>
  <script src="libs/backbone-min.js"></script>
  <link rel="stylesheet" href="libs/bootstrap.min.css"></link>
  <link rel="stylesheet" href="libs/bootstrap-theme.min.css"></link>
  <script src="libs/bootstrap.min.js"></script>

  <!-- Our own stuff --> 
  <link rel="stylesheet" href="codadmin.css" type="text/css"></style>
  <script src="codadmin.js"></script>

</head>
<body>
  <div id="alert-area">
  </div>
  
  <div class="row">
    <div class="col-xs-12 col-md-offset-2 col-md-8">
      <ul id="discs" class="list-group">
      </ul>
    </div>
  </div>


  <script type="text/template" id="disc-row-template">
    <div class="disc-row hover-row row">

    <!-- Disc row viewing mode -->
    <% if (artist || title) { %>
      <div class="view-only col-xs-5"><%- artist %></div>
      <div class="view-only col-xs-7"><%- title %>
    <% } else { %>
      <div class="view-only col-xs-12">(<%- disc_id %>)
    <% } %>
      <span class="badge pull-right">
        <% if (typeof tracks === 'number') { %><%- tracks %><% } else { %><%- tracks.length %><% } %>
      </span>
    </div>

    <!-- Disc row edit mode -->
    <fieldset>
    <div class="edit-only col-xs-5">
      <input data-edit-field="disc-artist"
             class="form-control"
             placeholder="Artist"
             value="<%- artist %>" >
    </div>
    <div class="edit-only col-xs-5">
      <input data-edit-field="disc-title"
             class="form-control"
             placeholder="Title"
             value="<%- title %>" >
    </div>

    <div class="edit-only col-xs-2">
      <span class="badge pull-right">
        <% if (typeof tracks === 'number') { %><%- tracks %><% } else { %><%- tracks.length %><% } %>
      </span>
    </div>

    </fieldset>
    </div>
  </script>
  
  <script type="text/template" id="disc-detail-template">
    <div class="disc-details row">
      <fieldset>

      <!-- track list -->
      <div class="col-xs-10">
        <ul class="list-group disc-tracks">
        <% var i; for (i = 0; i < tracks.length; i++) { %>
           <li class="list-group-item">
             <div class="track-row row">
             <div class="col-xs-1 track-number"><%- tracks[i].number %></div>
             <div class="col-xs-1 track-length"><%- tracks[i].length %></div>
             <div class="col-xs-10">

               <!--Track viewing mode -->
               <div class="view-only">
                 <div><%- tracks[i].title %></div>
                 <% if (tracks[i].artist && tracks[i].artist !== artist) { %>
                 <div><%- tracks[i].artist %></div>
                 <% } %>
               </div>

               <!-- Track editing mode -->
               <div class="edit-only">
                 <input data-edit-field="track-title"
                        data-edit-track-index="<%- i %>"
                        class="form-control input-sm"
                        placeholder="Track title"
                        value="<%- tracks[i].title %>" >
                 <input data-edit-field="track-artist"
                        data-edit-track-index="<%- i %>"
                        class="form-control input-sm"
                        placeholder="Track artist (if different to disc artist)"
                        value="<%- tracks[i].artist %>" >
               </div>
             </div>
           </div>
           </li>
        <% } %>
        </ul>
      </div>

      <!-- Edit buttons etc -->
      <div class="col-xs-2">
        <button type="button"
                class="edit-disc view-only btn btn-primary btn-block">
          Edit
        </button>
        <button type="button"
                class="save-edit edit-only btn btn-success btn-block"
                data-loading-text="Saving...">
          Save
        </button>
        <button type="button"
                class="cancel-edit edit-only btn btn-default btn-block">
          Cancel
        </button>
      </div>
                  
      <fieldset>
    </div>
  </script>

  <script type="text/template" id="alert-template">
    <% if (header || message) { %>
    <div class="row">
      <div class="alert-danger alert-dismissable col-xs-offset-1 col-xs-10 alert col-md-offset-3 col-md-6">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <strong><%- header %></strong> <%- message %>
      </div>
    </div>
    <% } %>
  </script>
</body>
</html>
  
